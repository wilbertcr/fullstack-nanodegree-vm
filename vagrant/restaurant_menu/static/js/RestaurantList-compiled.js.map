{"version":3,"sources":["RestaurantList.jsx"],"names":[],"mappings":"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","file":"RestaurantList-compiled.js","sourcesContent":["import React from 'react';\r\nimport NewRestaurantForm from './NewRestaurantForm';\r\nimport Restaurant from './Restaurant';\r\n\r\n\r\nexport default class RestaurantList extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {data: []};\r\n        this.handleNewRestaurantSubmit = this.handleNewRestaurantSubmit.bind(this);\r\n        this.handleDeleteRestaurant = this.handleDeleteRestaurant.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        $.ajax({\r\n            url: this.props.url,\r\n            dataType:'json',\r\n            cache: false,\r\n            success: function(data){\r\n                this.setState({data: data.restaurants});\r\n            }.bind(this),\r\n            error: function(xhr, status, err){\r\n                console.error(this.props.url, status, err.toString());\r\n            }.bind(this)\r\n        });\r\n    }\r\n\r\n    handleNewRestaurantSubmit(data){\r\n        var restaurants = this.state.data;\r\n        var endpoint = \"restaurants/new\"\r\n        $.ajax({\r\n            url: endpoint,\r\n            dataType: 'json',\r\n            type: 'POST',\r\n            data: data,\r\n            success: function(data){\r\n                this.setState({data: data.restaurants});\r\n            }.bind(this),\r\n            error: function(xhr,status,err){\r\n                console.error(endpoint,status,err.toString());\r\n            }.bind(this)\r\n        });\r\n\r\n    }\r\n\r\n    handleDeleteRestaurant(e){\r\n        var key = parseInt(e.target.attributes.getNamedItem('data-key').value,10);\r\n        var index = parseInt(e.target.attributes.getNamedItem('data-index').value,10);\r\n        console.log(\"Erased restaurant with key %d and index %d\",key,index);\r\n        this.setState({data: this.state.data.splice(index,1)});\r\n        var restaurant_id = key;\r\n        var endpoint = \"/restaurants/\"+restaurant_id+\"/delete\";\r\n        $.ajax({\r\n            url: endpoint,\r\n            dataType: 'json',\r\n            type: 'POST',\r\n            data: key,\r\n            success: function(data){\r\n                this.setState({data: data.restaurants});\r\n            }.bind(this),\r\n            error: function(xhr,status,err){\r\n                console.error(endpoint,status,err.toString());\r\n            }.bind(this)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        var restaurantNodes = this.state.data.map(function(restaurant,index) {\r\n            return (\r\n                <Restaurant key={restaurant.id}\r\n                            index={index}\r\n                            data={restaurant}\r\n                            deleteRestaurant={this.handleDeleteRestaurant}/>\r\n            );\r\n        }.bind(this));\r\n        return (\r\n            <ul className=\"mainnav\">\r\n                {restaurantNodes}\r\n                <NewRestaurantForm onNewRestaurantSubmit={this.handleNewRestaurantSubmit}/>\r\n            </ul>\r\n        );\r\n    }\r\n}"]}