{"version":3,"sources":["main.js"],"names":[],"mappings":";;AAEA,IAAI,YAAY,MAAM,WAAN,CAAkB;;;AAC9B,YAAQ,YAAW;AACf,YAAI,gBAAgB,KAAK,KAAL,CAAW,IAAX,CAAgB,GAAhB,CAChB,UAAS,IAAT,EAAc,KAAd,EAAoB;AAChB,mBACI;;kBAAO,KAAK,KAAK,EAAL,EAAZ;gBACI;;;oBACA;;;wBACI;;8BAAI,WAAU,WAAV,EAAJ;4BAA2B,KAAK,IAAL;yBAD/B;wBAEI;;8BAAI,WAAU,aAAV,EAAJ;;4BAAkC,KAAK,KAAL;yBAFtC;qBADA;oBAKA;;;wBACI;;8BAAI,WAAU,kBAAV,EAAJ;4BAAkC,KAAK,WAAL;yBADtC;wBAEI,4BAAI,WAAU,OAAV,EAAJ,CAFJ;qBALA;oBASA;;;wBACI;;8BAAI,WAAU,MAAV,EAAJ;4BACI;;kCAAQ,WAAU,gBAAV;AACA,6CAAS,KAAK,KAAL,CAAW,YAAX;AACT,gDAAU,KAAK,EAAL;AACV,kDAAY,KAAZ,EAHR;;6BADJ;yBADJ;wBAQI;;8BAAI,WAAU,OAAV,EAAJ;4BACI;;kCAAQ,WAAU,kBAAV;AACA,6CAAS,KAAK,KAAL,CAAW,cAAX;AACT,gDAAU,KAAK,EAAL;AACV,kDAAY,KAAZ,EAHR;;6BADJ;yBARJ;qBATA;iBADJ;aADJ,CADgB;SAApB,CA+BE,IA/BF,CA+BO,IA/BP,CADgB,CAAhB,CADW;AAmCf,eACI;;cAAK,WAAU,WAAV,EAAL;YACK,aADL;SADJ,CAnCe;KAAX;CADI,CAAZ;;AA4CJ,IAAI,OAAO,MAAM,WAAN,CAAkB;;;;AAEzB,yBAAqB,YAAU;AAC3B,UAAE,IAAF,CAAO;AACH,iBAAK,KAAK,KAAL,CAAW,GAAX;AACL,sBAAS,MAAT;AACA,mBAAO,KAAP;AACA,qBAAS,UAAS,IAAT,EAAc;AACnB,qBAAK,QAAL,CAAc,EAAC,MAAM,KAAK,SAAL,EAArB,EADmB;aAAd,CAEP,IAFO,CAEF,IAFE,CAAT;AAGA,mBAAO,UAAS,GAAT,EAAc,MAAd,EAAsB,GAAtB,EAA0B;AAC7B,wBAAQ,KAAR,CAAc,KAAK,KAAL,CAAW,GAAX,EAAgB,MAA9B,EAAsC,IAAI,QAAJ,EAAtC,EAD6B;aAA1B,CAEL,IAFK,CAEA,IAFA,CAAP;SAPJ,EAD2B;KAAV;;;AAerB,yBAAqB,UAAS,IAAT,EAAc;AAC/B,YAAI,aAAa,KAAK,KAAL,CAAW,UAAX,CADc;AAE/B,YAAI,YAAY,KAAK,KAAL,CAAW,IAAX,CAFe;AAG/B,YAAI,WAAW,kBAAgB,WAAW,EAAX,GAAc,WAA9B,CAHgB;AAI/B,UAAE,IAAF,CAAO;AACH,iBAAK,QAAL;AACA,sBAAU,MAAV;AACA,kBAAM,MAAN;AACA,kBAAM,IAAN;AACA,qBAAS,UAAS,IAAT,EAAc;AACnB,oBAAI,iBAAiB,KAAK,SAAL,CAAjB,CADe;AAEnB,oBAAI,UAAU,eAAe,CAAf,CAAV,CAFe;AAGnB,oBAAI,eAAe,UAAU,MAAV,CAAiB,CAAC,OAAD,CAAjB,CAAf,CAHe;AAInB,qBAAK,QAAL,CAAc,EAAC,MAAM,YAAN,EAAf,EAJmB;aAAd,CAKP,IALO,CAKF,IALE,CAAT;AAMA,mBAAO,UAAS,GAAT,EAAa,MAAb,EAAoB,GAApB,EAAwB;AAC3B,wBAAQ,KAAR,CAAc,QAAd,EAAuB,MAAvB,EAA8B,IAAI,QAAJ,EAA9B,EAD2B;aAAxB,CAEL,IAFK,CAEA,IAFA,CAAP;SAXJ,EAJ+B;KAAd;AAoBrB,qBAAiB,YAAU;AACvB,eAAM,EAAC,MAAM,EAAN,EAAP,CADuB;KAAV;AAGjB,uBAAkB,YAAU;AACxB,aAAK,mBAAL,GADwB;AAExB,oBAAY,KAAK,mBAAL,EAAyB,KAAK,KAAL,CAAW,YAAX,CAArC,CAFwB;KAAV;AAIlB,oBAAgB,UAAS,CAAT,EAAW;AACvB,YAAI,MAAM,SAAS,EAAE,MAAF,CAAS,UAAT,CAAoB,YAApB,CAAiC,UAAjC,EAA6C,KAA7C,EAAmD,EAA5D,CAAN,CADmB;AAEvB,YAAI,QAAQ,SAAS,EAAE,MAAF,CAAS,UAAT,CAAoB,YAApB,CAAiC,YAAjC,EAA+C,KAA/C,EAAqD,EAA9D,CAAR,CAFmB;AAGvB,gBAAQ,GAAR,CAAY,2CAAZ,EAAwD,GAAxD,EAA4D,KAA5D,EAHuB;AAIvB,aAAK,QAAL,CAAc,EAAC,MAAM,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB,CAAuB,KAAvB,EAA6B,CAA7B,CAAN,EAAf,EAJuB;AAKvB,YAAI,aAAa,KAAK,KAAL,CAAW,UAAX,CALM;AAMvB,YAAI,WAAW,kBAAgB,WAAW,EAAX,GAAc,GAA9B,GAAkC,GAAlC,GAAsC,SAAtC,CANQ;AAOvB,UAAE,IAAF,CAAO;AACH,iBAAK,QAAL;AACA,sBAAU,MAAV;AACA,kBAAM,MAAN;AACA,kBAAM,GAAN;AACA,qBAAS,UAAS,IAAT,EAAc;AACnB,qBAAK,QAAL,CAAc,EAAC,MAAM,KAAK,SAAL,EAArB,EADmB;aAAd,CAEP,IAFO,CAEF,IAFE,CAAT;AAGA,mBAAO,UAAS,GAAT,EAAa,MAAb,EAAoB,GAApB,EAAwB;AAC3B,wBAAQ,KAAR,CAAc,QAAd,EAAuB,MAAvB,EAA8B,IAAI,QAAJ,EAA9B,EAD2B;aAAxB,CAEL,IAFK,CAEA,IAFA,CAAP;SARJ,EAPuB;KAAX;AAoBhB,YAAQ,YAAU;AACd,YAAI,aAAa,KAAK,KAAL,CAAW,UAAX,CADH;AAEd,eACA;;cAAK,WAAU,MAAV,EAAL;YACI;;;gBAAK,WAAW,IAAX,GAAgB,IAAhB;uBAAL;aADJ;YAEI,oBAAC,SAAD,IAAW,MAAM,KAAK,KAAL,CAAW,IAAX,EAAiB,gBAAgB,KAAK,cAAL,EAAlD,CAFJ;YAGI,oBAAC,WAAD,IAAa,iBAAiB,KAAK,mBAAL,EAA9B,CAHJ;SADA,CAFc;KAAV;CAhED,CAAP;;AA4EJ,IAAI,cAAc,MAAM,WAAN,CAAkB;;;AAChC,qBAAiB,YAAU;AACvB,eAAM,EAAC,MAAM,EAAN,EAAU,OAAO,EAAP,EAAW,QAAO,EAAP,EAAW,aAAY,EAAZ,EAAvC,CADuB;KAAV;AAGjB,sBAAiB,UAAS,CAAT,EAAW;AACxB,aAAK,QAAL,CAAc,EAAC,MAAM,EAAE,MAAF,CAAS,KAAT,EAArB,EADwB;KAAX;AAGjB,6BAAwB,UAAS,CAAT,EAAW;AAC/B,aAAK,QAAL,CAAc,EAAC,aAAa,EAAE,MAAF,CAAS,KAAT,EAA5B,EAD+B;KAAX;AAGxB,uBAAkB,UAAS,CAAT,EAAW;AACzB,aAAK,QAAL,CAAc,EAAC,OAAO,EAAE,MAAF,CAAS,KAAT,EAAtB,EADyB;KAAX;AAGlB,wBAAmB,UAAS,CAAT,EAAW;AAC1B,aAAK,QAAL,CAAc,EAAC,QAAQ,EAAE,MAAF,CAAS,KAAT,EAAvB,EAD0B;KAAX;AAGnB,kBAAc,UAAS,CAAT,EAAW;AACrB,UAAE,cAAF,GADqB;AAErB,YAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,EAAP,CAFiB;AAGrB,YAAI,cAAc,KAAK,KAAL,CAAW,WAAX,CAAuB,IAAvB,EAAd,CAHiB;AAIrB,YAAI,QAAQ,KAAK,KAAL,CAAW,KAAX,CAAiB,IAAjB,EAAR,CAJiB;AAKrB,YAAI,SAAS,KAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB,EAAT,CALiB;AAMrB,aAAK,KAAL,CAAW,eAAX,CAA2B,EAAC,MAAM,IAAN,EAAY,aAAa,WAAb,EAA0B,OAAO,KAAP,EAAc,QAAQ,MAAR,EAAhF,EANqB;AAOrB,aAAK,QAAL,CAAc,EAAC,MAAK,EAAL,EAAQ,aAAY,EAAZ,EAAe,OAAM,EAAN,EAAS,QAAO,EAAP,EAA/C,EAPqB;KAAX;AASd,YAAQ,YAAU;AACd,eACI;;cAAM,WAAU,aAAV,EAAwB,UAAU,KAAK,YAAL,EAAxC;YACI;AACA,sBAAK,MAAL;AACA,6BAAY,MAAZ;AACA,uBAAO,KAAK,KAAL,CAAW,IAAX;AACP,0BAAU,KAAK,gBAAL;aAJV,CADJ;YAMM,+BANN;YAQI;AACA,sBAAK,MAAL;AACA,6BAAY,aAAZ;AACA,uBAAO,KAAK,KAAL,CAAW,WAAX;AACP,0BAAU,KAAK,uBAAL;aAJV,CARJ;YAaM,+BAbN;YAeI;AACA,sBAAK,MAAL;AACA,6BAAY,OAAZ;AACA,uBAAO,KAAK,KAAL,CAAW,KAAX;AACP,0BAAU,KAAK,iBAAL;aAJV,CAfJ;YAoBM,+BApBN;YAsBI;AACA,sBAAK,MAAL;AACA,6BAAY,QAAZ;AACA,uBAAO,KAAK,KAAL,CAAW,MAAX;AACP,0BAAU,KAAK,kBAAL;aAJV,CAtBJ;YA2BM,+BA3BN;YA4BI,+BAAO,WAAU,WAAV,EAAsB,MAAK,QAAL,EAAc,OAAM,QAAN,EAA3C,CA5BJ;SADJ,CADc;KAAV;CAzBM,CAAd;;AA8DJ,IAAI,oBAAoB,MAAM,WAAN,CAAkB;;;AACtC,qBAAiB,YAAU;AACvB,eAAM,EAAC,MAAM,EAAN,EAAP,CADuB;KAAV;AAGjB,sBAAiB,UAAS,CAAT,EAAW;AACxB,aAAK,QAAL,CAAc,EAAC,MAAM,EAAE,MAAF,CAAS,KAAT,EAArB,EADwB;KAAX;AAGjB,kBAAc,UAAS,CAAT,EAAW;AACrB,UAAE,cAAF,GADqB;AAErB,YAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,EAAP,CAFiB;AAGrB,YAAI,OAAO,EAAC,MAAM,IAAN,EAAR,CAHiB;AAIrB,aAAK,KAAL,CAAW,qBAAX,CAAiC,IAAjC,EAJqB;AAKrB,aAAK,KAAL,CAAW,IAAX,GAAgB,EAAhB,CALqB;KAAX;AAOd,YAAQ,YAAU;AACd,eACI;;cAAM,WAAU,mBAAV,EAA8B,UAAU,KAAK,YAAL,EAA9C;YACI;AACA,sBAAK,MAAL;AACA,6BAAY,MAAZ;AACA,uBAAO,KAAK,KAAL,CAAW,IAAX;AACP,0BAAU,KAAK,gBAAL;aAJV,CADJ;YAMM,+BANN;YAOI,+BAAO,WAAU,WAAV,EAAsB,MAAK,QAAL,EAAc,OAAM,QAAN,EAA3C,CAPJ;SADJ,CADc;KAAV;CAdY,CAApB;;AA8BJ,IAAI,aAAa,MAAM,WAAN,CAAkB;;;AAC/B,qBAAiB,YAAU;AACvB,eAAO,EAAC,MAAM,IAAN,EAAR,CADuB;KAAV;AAGjB,iBAAa,YAAU;AACnB,YAAI,aAAa,KAAK,KAAL,CAAW,IAAX,CADE;AAEnB,YAAG,KAAK,KAAL,CAAW,IAAX,EAAgB;AACf,cAAE,IAAF,CAAO;AACH,qBAAK,kBAAgB,WAAW,EAAX,GAAc,YAA9B;AACL,0BAAS,MAAT;AACA,uBAAO,KAAP;AACA,yBAAS,UAAS,IAAT,EAAc;AACnB,yBAAK,KAAL,CAAW,IAAX,CAAgB,QAAhB,CAAyB,EAAC,MAAM,KAAK,SAAL,EAAhC,EADmB;AAEnB,4BAAQ,GAAR,CAAY,iBAAZ,EAFmB;iBAAd,CAGP,IAHO,CAGF,IAHE,CAAT;AAIA,uBAAO,UAAS,GAAT,EAAc,MAAd,EAAsB,GAAtB,EAA0B;AAC7B,4BAAQ,KAAR,CAAc,KAAK,KAAL,CAAW,GAAX,EAAgB,MAA9B,EAAsC,IAAI,QAAJ,EAAtC,EAD6B;iBAA1B,CAEL,IAFK,CAEA,IAFA,CAAP;aARJ,EADe;SAAnB,MAaO;AACH,iBAAK,KAAL,CAAW,IAAX,GAAkB,SAAS,MAAT,CACd,oBAAC,IAAD,IAAM,KAAK,kBAAgB,WAAW,EAAX,GAAc,YAA9B,EAA4C,YAAY,UAAZ,EAAwB,cAAc,IAAd,EAA/E,CADc,EAEd,SAAS,cAAT,CAAwB,cAAxB,CAFc,CAAlB,CADG;AAKH,oBAAQ,GAAR,CAAY,iBAAZ,EALG;SAbP;KAFS;AAwBb,YAAQ,YAAU;AACd,YAAI,aAAa,KAAK,KAAL,CAAW,IAAX,CADH;AAEd,eACQ;;;YACI;;kBAAG,KAAK,WAAW,EAAX;AACR,6BAAS,KAAK,WAAL,EADT;gBAEK,WAAW,IAAX;aAHT;YAKI;;kBAAQ,WAAU,qBAAV;AACJ,6BAAS,KAAK,KAAL,CAAW,gBAAX;AACT,gCAAU,WAAW,EAAX;AACV,kCAAY,KAAK,KAAL,CAAW,KAAX,EAHhB;;aALJ;YAUI;;kBAAQ,WAAU,uBAAV;AACJ,6BAAS,KAAK,KAAL,CAAW,gBAAX;AACT,gCAAU,WAAW,EAAX;AACV,kCAAY,KAAK,KAAL,CAAW,KAAX,EAHhB;;aAVJ;SADR,CAFc;KAAV;CA5BK,CAAb;;AAqDJ,IAAI,iBAAiB,MAAM,WAAN,CAAkB;;;AACrC,qBAAiB,YAAU;AACzB,eAAM,EAAC,MAAM,EAAN,EAAP,CADyB;KAAV;AAGjB,uBAAmB,YAAU;AACzB,UAAE,IAAF,CAAO;AACL,iBAAK,KAAK,KAAL,CAAW,GAAX;AACL,sBAAS,MAAT;AACA,mBAAO,KAAP;AACA,qBAAS,UAAS,IAAT,EAAc;AACnB,qBAAK,QAAL,CAAc,EAAC,MAAM,KAAK,WAAL,EAArB,EADmB;aAAd,CAEP,IAFO,CAEF,IAFE,CAAT;AAGA,mBAAO,UAAS,GAAT,EAAc,MAAd,EAAsB,GAAtB,EAA0B;AAC7B,wBAAQ,KAAR,CAAc,KAAK,KAAL,CAAW,GAAX,EAAgB,MAA9B,EAAsC,IAAI,QAAJ,EAAtC,EAD6B;aAA1B,CAEL,IAFK,CAEA,IAFA,CAAP;SAPF,EADyB;KAAV;AAcnB,+BAA2B,UAAS,IAAT,EAAc;AACnC,YAAI,cAAc,KAAK,KAAL,CAAW,IAAX,CADiB;AAEnC,YAAI,WAAW,iBAAX,CAF+B;AAGnC,UAAE,IAAF,CAAO;AACH,iBAAK,QAAL;AACA,sBAAU,MAAV;AACA,kBAAM,MAAN;AACA,kBAAM,IAAN;AACA,qBAAS,UAAS,IAAT,EAAc;AACnB,qBAAK,QAAL,CAAc,EAAC,MAAM,KAAK,WAAL,EAArB,EADmB;aAAd,CAEP,IAFO,CAEF,IAFE,CAAT;AAGA,mBAAO,UAAS,GAAT,EAAa,MAAb,EAAoB,GAApB,EAAwB;AAC3B,wBAAQ,KAAR,CAAc,QAAd,EAAuB,MAAvB,EAA8B,IAAI,QAAJ,EAA9B,EAD2B;aAAxB,CAEL,IAFK,CAEA,IAFA,CAAP;SARJ,EAHmC;KAAd;AAiB3B,4BAAwB,UAAS,CAAT,EAAW;AAC7B,YAAI,MAAM,SAAS,EAAE,MAAF,CAAS,UAAT,CAAoB,YAApB,CAAiC,UAAjC,EAA6C,KAA7C,EAAmD,EAA5D,CAAN,CADyB;AAE7B,YAAI,QAAQ,SAAS,EAAE,MAAF,CAAS,UAAT,CAAoB,YAApB,CAAiC,YAAjC,EAA+C,KAA/C,EAAqD,EAA9D,CAAR,CAFyB;AAG7B,gBAAQ,GAAR,CAAY,4CAAZ,EAAyD,GAAzD,EAA6D,KAA7D,EAH6B;AAI7B,aAAK,QAAL,CAAc,EAAC,MAAM,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB,CAAuB,KAAvB,EAA6B,CAA7B,CAAN,EAAf,EAJ6B;AAK7B,YAAI,gBAAgB,GAAhB,CALyB;AAM7B,YAAI,WAAW,kBAAgB,aAAhB,GAA8B,SAA9B,CANc;AAO7B,UAAE,IAAF,CAAO;AACH,iBAAK,QAAL;AACA,sBAAU,MAAV;AACA,kBAAM,MAAN;AACA,kBAAM,GAAN;AACA,qBAAS,UAAS,IAAT,EAAc;AACnB,qBAAK,QAAL,CAAc,EAAC,MAAM,KAAK,WAAL,EAArB,EADmB;aAAd,CAEP,IAFO,CAEF,IAFE,CAAT;AAGA,mBAAO,UAAS,GAAT,EAAa,MAAb,EAAoB,GAApB,EAAwB;AAC3B,wBAAQ,KAAR,CAAc,QAAd,EAAuB,MAAvB,EAA8B,IAAI,QAAJ,EAA9B,EAD2B;aAAxB,CAEL,IAFK,CAEA,IAFA,CAAP;SARJ,EAP6B;KAAX;AAoBxB,YAAQ,YAAW;AACb,YAAI,kBAAkB,KAAK,KAAL,CAAW,IAAX,CAAgB,GAAhB,CAAoB,UAAS,UAAT,EAAoB,KAApB,EAA2B;AACnE,mBACE,oBAAC,UAAD,IAAY,KAAK,WAAW,EAAX;AACb,uBAAO,KAAP;AACA,sBAAM,UAAN;AACA,kCAAkB,KAAK,sBAAL,EAHtB,CADF,CADmE;SAA3B,CAOxC,IAPwC,CAOnC,IAPmC,CAApB,CAAlB,CADS;AASb,eACE;;cAAI,WAAU,SAAV,EAAJ;YACG,eADH;YAEE,oBAAC,iBAAD,IAAmB,uBAAuB,KAAK,yBAAL,EAA1C,CAFF;SADF,CATa;KAAX;CAvDW,CAAjB;;AA0EJ,IAAI,eAAe,MAAM,WAAN,CAAkB;;;AACjC,qBAAiB,YAAU;AACzB,eAAM,EAAC,MAAM,EAAN,EAAP,CADyB;KAAV;AAGjB,YAAQ,YAAU;AACd,eACI;;;YACA;;kBAAK,IAAG,YAAH,EAAL;gBACI;;;oBAAK,oBAAC,cAAD,IAAgB,KAAK,mBAAL,EAAhB,CAAL;iBADJ;aADA;YAKA,6BAAK,IAAG,cAAH,EAAL,CALA;YAOA,6BAAK,IAAG,aAAH,EAAL,CAPA;YASA;;kBAAK,IAAG,QAAH,EAAL;;aATA;SADJ,CADc;KAAV;CAJO,CAAf;;AAsBJ,SAAS,MAAT,CACI,oBAAC,YAAD,OADJ,EAEI,SAAS,cAAT,CAAwB,SAAxB,CAFJ","file":"main-compiled.js","sourcesContent":["\r\n\r\nvar MenuItems = React.createClass({\r\n    render: function() {\r\n        var menuItemNodes = this.props.data.map(\r\n            function(item,index){\r\n                return(\r\n                    <table key={item.id}>\r\n                        <tbody>\r\n                        <tr>\r\n                            <td className=\"name left\">{item.name}</td>\r\n                            <td className=\"price right\">&#36;{item.price}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td className=\"left description\">{item.description}</td>\r\n                            <td className=\"right\"></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td className=\"left\">\r\n                                <button className=\"editItemButton\"\r\n                                        onClick={this.props.editMenuItem}\r\n                                        data-key={item.id}\r\n                                        data-index={index}>edit\r\n                                </button>\r\n                            </td>\r\n                            <td className=\"right\">\r\n                                <button className=\"deleteItemButton\"\r\n                                        onClick={this.props.deleteMenuItem}\r\n                                        data-key={item.id}\r\n                                        data-index={index}>delete\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                );\r\n            }.bind(this)\r\n        );\r\n        return (\r\n            <div className=\"menuItems\">\r\n                {menuItemNodes}\r\n            </div>\r\n        );\r\n    }\r\n});\r\n\r\nvar Menu = React.createClass({\r\n    //Loads/refreshes menu items in display.\r\n    loadItemsFromServer: function(){\r\n        $.ajax({\r\n            url: this.props.url,\r\n            dataType:'json',\r\n            cache: false,\r\n            success: function(data){\r\n                this.setState({data: data.MenuItems});\r\n            }.bind(this),\r\n            error: function(xhr, status, err){\r\n                console.error(this.props.url, status, err.toString());\r\n            }.bind(this)\r\n        });\r\n    },\r\n    //Stores the new item in the server and updates the\r\n    //menu accordingly once the server has responded appropriately.\r\n    handleNewItemSubmit: function(item){\r\n        var restaurant = this.props.restaurant;\r\n        var MenuItems = this.state.data;\r\n        var endpoint = \"/restaurants/\"+restaurant.id+\"/menu/new\";\r\n        $.ajax({\r\n            url: endpoint,\r\n            dataType: 'json',\r\n            type: 'POST',\r\n            data: item,\r\n            success: function(data){\r\n                var NewItemWrapper = data['NewItem'];\r\n                var NewItem = NewItemWrapper[0];\r\n                var newMenuItems = MenuItems.concat([NewItem]);\r\n                this.setState({data: newMenuItems});\r\n            }.bind(this),\r\n            error: function(xhr,status,err){\r\n                console.error(endpoint,status,err.toString());\r\n            }.bind(this)\r\n        });\r\n    },\r\n    getInitialState: function(){\r\n        return{data: []};\r\n    },\r\n    componentDidMount:function(){\r\n        this.loadItemsFromServer();\r\n        setInterval(this.loadItemsFromServer,this.props.pollInterval);\r\n    },\r\n    deleteMenuItem: function(e){\r\n        var key = parseInt(e.target.attributes.getNamedItem('data-key').value,10);\r\n        var index = parseInt(e.target.attributes.getNamedItem('data-index').value,10);\r\n        console.log(\"Erased menu item with key %d and index %d\",key,index);\r\n        this.setState({data: this.state.data.splice(index,1)});\r\n        var restaurant = this.props.restaurant;\r\n        var endpoint = \"/restaurants/\"+restaurant.id+\"/\"+key+\"/delete\";\r\n        $.ajax({\r\n            url: endpoint,\r\n            dataType: 'json',\r\n            type: 'POST',\r\n            data: key,\r\n            success: function(data){\r\n                this.setState({data: data.MenuItems});\r\n            }.bind(this),\r\n            error: function(xhr,status,err){\r\n                console.error(endpoint,status,err.toString());\r\n            }.bind(this)\r\n        });\r\n    },\r\n    render: function(){\r\n        var restaurant = this.props.restaurant;\r\n        return(\r\n        <div className=\"Menu\">\r\n            <h2>{restaurant.name+\"'s\"} Menu</h2>\r\n            <MenuItems data={this.state.data} deleteMenuItem={this.deleteMenuItem}/>\r\n            <NewItemForm onNewItemSubmit={this.handleNewItemSubmit}/>\r\n        </div>\r\n        );\r\n    }\r\n});\r\n\r\nvar NewItemForm = React.createClass({\r\n    getInitialState: function(){\r\n        return{name: '', price: '', course:'', description:''}\r\n    },\r\n    handleNameChange:function(e){\r\n        this.setState({name: e.target.value});\r\n    },\r\n    handleDescriptionChange:function(e){\r\n        this.setState({description: e.target.value});\r\n    },\r\n    handlePriceChange:function(e){\r\n        this.setState({price: e.target.value});\r\n    },\r\n    handleCourseChange:function(e){\r\n        this.setState({course: e.target.value});\r\n    },\r\n    handleSubmit: function(e){\r\n        e.preventDefault();\r\n        var name = this.state.name.trim();\r\n        var description = this.state.description.trim();\r\n        var price = this.state.price.trim();\r\n        var course = this.state.course.trim();\r\n        this.props.onNewItemSubmit({name: name, description: description, price: price, course: course});\r\n        this.setState({name:'',description:'',price:'',course:''});\r\n    },\r\n    render: function(){\r\n        return(\r\n            <form className=\"newItemForm\" onSubmit={this.handleSubmit}>\r\n                <input\r\n                type=\"text\"\r\n                placeholder=\"Name\"\r\n                value={this.state.name}\r\n                onChange={this.handleNameChange}\r\n                /><br/>\r\n\r\n                <input\r\n                type=\"text\"\r\n                placeholder=\"Description\"\r\n                value={this.state.description}\r\n                onChange={this.handleDescriptionChange}\r\n                /><br/>\r\n\r\n                <input\r\n                type=\"text\"\r\n                placeholder=\"Price\"\r\n                value={this.state.price}\r\n                onChange={this.handlePriceChange}\r\n                /><br/>\r\n\r\n                <input\r\n                type=\"text\"\r\n                placeholder=\"Course\"\r\n                value={this.state.course}\r\n                onChange={this.handleCourseChange}\r\n                /><br/>\r\n                <input className=\"redButton\" type=\"submit\" value=\"Submit\"/>\r\n            </form>\r\n        );\r\n    }\r\n});\r\n\r\n\r\nvar NewRestaurantForm = React.createClass({\r\n    getInitialState: function(){\r\n        return{name: ''}\r\n    },\r\n    handleNameChange:function(e){\r\n        this.setState({name: e.target.value});\r\n    },\r\n    handleSubmit: function(e){\r\n        e.preventDefault();\r\n        var name = this.state.name.trim();\r\n        var data = {name: name};\r\n        this.props.onNewRestaurantSubmit(data);\r\n        this.state.name='';\r\n    },\r\n    render: function(){\r\n        return(\r\n            <form className=\"newRestaurantForm\" onSubmit={this.handleSubmit}>\r\n                <input\r\n                type=\"text\"\r\n                placeholder=\"Name\"\r\n                value={this.state.name}\r\n                onChange={this.handleNameChange}\r\n                /><br/>\r\n                <input className=\"redButton\" type=\"submit\" value=\"Submit\"/>\r\n            </form>\r\n        );\r\n    }\r\n});\r\n\r\n\r\nvar Restaurant = React.createClass({\r\n    getInitialState: function(){\r\n        return {comp: null};\r\n    },\r\n    displayMenu: function(){\r\n        var restaurant = this.props.data;\r\n        if(this.state.comp){\r\n            $.ajax({\r\n                url: \"/restaurants/\"+restaurant.id+\"/menu/JSON\",\r\n                dataType:'json',\r\n                cache: false,\r\n                success: function(data){\r\n                    this.state.comp.setState({data: data.MenuItems});\r\n                    console.log(\"Refreshed menu.\");\r\n                }.bind(this),\r\n                error: function(xhr, status, err){\r\n                    console.error(this.props.url, status, err.toString());\r\n                }.bind(this)\r\n            });\r\n        } else {\r\n            this.state.comp = ReactDOM.render(\r\n                <Menu url={\"/restaurants/\"+restaurant.id+\"/menu/JSON\"} restaurant={restaurant} pollInterval={2000}/>,\r\n                document.getElementById('centercolumn')\r\n            );\r\n            console.log(\"Rendering menu.\");\r\n        }\r\n\r\n    },\r\n    render: function(){\r\n        var restaurant = this.props.data;\r\n        return(\r\n                <li>\r\n                    <a key={restaurant.id}\r\n                    onClick={this.displayMenu}>\r\n                        {restaurant.name}\r\n                    </a>\r\n                    <button className=\"editItemSmallButton\"\r\n                        onClick={this.props.deleteRestaurant}\r\n                        data-key={restaurant.id}\r\n                        data-index={this.props.index}>edit\r\n                    </button>\r\n                    <button className=\"deleteItemSmallButton\"\r\n                        onClick={this.props.deleteRestaurant}\r\n                        data-key={restaurant.id}\r\n                        data-index={this.props.index}>delete\r\n                    </button>\r\n                </li>\r\n        );\r\n\r\n    }\r\n});\r\n\r\n\r\nvar RestaurantList = React.createClass({\r\n  getInitialState: function(){\r\n    return{data: []};\r\n  },\r\n  componentDidMount: function(){\r\n      $.ajax({\r\n        url: this.props.url,\r\n        dataType:'json',\r\n        cache: false,\r\n        success: function(data){\r\n            this.setState({data: data.restaurants});\r\n        }.bind(this),\r\n        error: function(xhr, status, err){\r\n            console.error(this.props.url, status, err.toString());\r\n        }.bind(this)\r\n      });\r\n\r\n  },\r\n  handleNewRestaurantSubmit: function(data){\r\n        var restaurants = this.state.data;\r\n        var endpoint = \"restaurants/new\"\r\n        $.ajax({\r\n            url: endpoint,\r\n            dataType: 'json',\r\n            type: 'POST',\r\n            data: data,\r\n            success: function(data){\r\n                this.setState({data: data.restaurants});\r\n            }.bind(this),\r\n            error: function(xhr,status,err){\r\n                console.error(endpoint,status,err.toString());\r\n            }.bind(this)\r\n        });\r\n\r\n  },\r\n  handleDeleteRestaurant: function(e){\r\n        var key = parseInt(e.target.attributes.getNamedItem('data-key').value,10);\r\n        var index = parseInt(e.target.attributes.getNamedItem('data-index').value,10);\r\n        console.log(\"Erased restaurant with key %d and index %d\",key,index);\r\n        this.setState({data: this.state.data.splice(index,1)});\r\n        var restaurant_id = key;\r\n        var endpoint = \"/restaurants/\"+restaurant_id+\"/delete\";\r\n        $.ajax({\r\n            url: endpoint,\r\n            dataType: 'json',\r\n            type: 'POST',\r\n            data: key,\r\n            success: function(data){\r\n                this.setState({data: data.restaurants});\r\n            }.bind(this),\r\n            error: function(xhr,status,err){\r\n                console.error(endpoint,status,err.toString());\r\n            }.bind(this)\r\n        });\r\n  },\r\n  render: function() {\r\n        var restaurantNodes = this.state.data.map(function(restaurant,index) {\r\n          return (\r\n            <Restaurant key={restaurant.id}\r\n                index={index}\r\n                data={restaurant}\r\n                deleteRestaurant={this.handleDeleteRestaurant}/>\r\n          );\r\n        }.bind(this));\r\n        return (\r\n          <ul className=\"mainnav\">\r\n            {restaurantNodes}\r\n            <NewRestaurantForm onNewRestaurantSubmit={this.handleNewRestaurantSubmit}/>\r\n          </ul>\r\n        );\r\n    }\r\n});\r\n\r\n\r\nvar EnclosingApp = React.createClass({\r\n    getInitialState: function(){\r\n      return{data: []};\r\n    },\r\n    render: function(){\r\n        return(\r\n            <div>\r\n            <div id=\"leftcolumn\">\r\n                <div><RestaurantList url={\"/restaurants/JSON\"}/>\r\n                </div>\r\n            </div>\r\n            <div id=\"centercolumn\">\r\n            </div>\r\n            <div id=\"rightcolumn\">\r\n            </div>\r\n            <div id=\"footer\">&copy; Copyright with...</div>\r\n            </div>\r\n        );\r\n    }\r\n});\r\n\r\n\r\nReactDOM.render(\r\n    <EnclosingApp/>,\r\n    document.getElementById('mainbox')\r\n);"]}